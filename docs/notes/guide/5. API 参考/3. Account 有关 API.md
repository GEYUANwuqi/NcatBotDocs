---
title: Account API（异步）
createTime: 2025/09/26 17:25:00
permalink: /api/botapi/account/
---

## 概览

账号资料、好友、消息已读与最近联系人等接口。

---

## 账号相关

### set_qq_profile

- **功能**: 设置昵称/签名/性别。
- **参数**: `nickname: str`, `personal_note: str`, `sex: Literal["未知","男","女"]`
- **返回**: `None`
- **示例**：

```python
await api.set_qq_profile("阿猫", "保持学习", "男")
```

### set_online_status

- **功能**: 设置在线与扩展状态。
- **参数**: `status: int`, `ext_status: int`, `battary_status: int`
- **返回**: `None`
- **示例**：

```python
await api.set_online_status(11, 0, 100)
```

### set_avatar

- **功能**: 设置头像。
- **参数**: `file: str`（本地或 URL，经 `convert_uploadable_object` 适配）
- **返回**: `None`
- **示例**：

```python
await api.set_avatar("https://example.com/avatar.jpg")
```

### set_self_longnick

- **功能**: 设置长签。
- **参数**: `longNick: str`
- **返回**: `None`
- **示例**：

```python
await api.set_self_longnick("写代码，爱生活")
```

### get_login_info

- **功能**: 获取登录信息。
- **返回**: `LoginInfo`（`nickname: str`, `user_id: str`）
- **示例**：

```python
info = await api.get_login_info()
print(info.user_id, info.nickname)
```

### get_status

- **功能**: 获取运行状态。
- **返回**: `dict`
- **示例**：

```python
status = await api.get_status()
```

---

## 好友

### get_friends_with_cat

- **功能**: 获取好友列表（Cat 分类）。
- **返回**: `list[dict]`
- **示例**：

```python
friends = await api.get_friends_with_cat()
```

### send_like

- **功能**: 对好友点赞。
- **参数**: `user_id`, `times: int = 1`
- **返回**: `None`
- **示例**：

```python
await api.send_like(123456, times=5)
```

### set_friend_add_request

- **功能**: 审核加好友请求。
- **参数**: `flag: str`, `approve: bool`, `remark: str | None`
- **返回**: `None`
- **示例**：

```python
await api.set_friend_add_request(flag, approve=True, remark="同学")
```

### get_friend_list

- **功能**: 获取好友列表。
- **返回**: `list[dict]`
- **示例**：

```python
friends = await api.get_friend_list()
```

### delete_friend

- **功能**: 删除好友（可拉黑、双向）。
- **参数**: `user_id`, `block: bool = True`, `both: bool = True`
- **返回**: `None`
- **示例**：

```python
await api.delete_friend(123456, block=True, both=True)
```

### set_friend_remark

- **功能**: 设置好友备注。
- **参数**: `user_id`, `remark: str`
- **返回**: `None`
- **示例**：

```python
await api.set_friend_remark(123456, "同学-张三")
```

---

## 消息

### mark_group_msg_as_read

- **功能**: 将群消息标记为已读。
- **参数**: `group_id`
- **返回**: `None`
- **示例**：

```python
await api.mark_group_msg_as_read(123456)
```

### mark_private_msg_as_read

- **功能**: 将私聊消息标记为已读。
- **参数**: `user_id`
- **返回**: `None`
- **示例**：

```python
await api.mark_private_msg_as_read(123456)
```

### create_collection

- **功能**: 新建收藏。
- **参数**: `rawData: str`, `brief: str`
- **返回**: `None`
- **示例**：

```python
await api.create_collection("{...}", "重要记录")
```

### get_recent_contact

- **功能**: 最近联系人。
- **返回**: `list[dict]`
- **示例**：

```python
contacts = await api.get_recent_contact()
```

### _mark_all_as_read

- **功能**: 全部设为已读。
- **返回**: `None`
- **示例**：

```python
await api._mark_all_as_read()
```

---

## 群（账号维度）

### AskShareGroup

- **功能**: 请求分享群（NapCat 能力）。
- **参数**: `group_id`
- **返回**: `None`
- **示例**：

```python
await api.AskShareGroup(123456)
```

---

## 其它

### get_stranger_info

- **功能**: 获取陌生人信息（结构依赖端实现）。
- **参数**: `user_id`
- **返回**: `dict`
- **示例**：

```python
info = await api.get_stranger_info(123456)
```

### fetch_custom_face

- **功能**: 拉取自定义表情 URL 列表。
- **参数**: `count: int = 48`
- **返回**: `CustomFaceList`（字段：`urls: list[str]`）
- **示例**：

```python
faces = await api.fetch_custom_face(48)
print(faces.urls[:3])
```

### nc_get_user_status

- **功能**: NapCat 用户在线状态。
- **参数**: `user_id`
- **返回**: `dict`
- **示例**：

```python
status = await api.nc_get_user_status(123456)
```


