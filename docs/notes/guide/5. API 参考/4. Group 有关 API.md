---
title: Group API
createTime: 2025/09/26 17:23:00
permalink: /guide/apigroup/
---

## 概览

群管理、群文件、荣誉与信息等接口。

---

## 成员管理

### set_group_kick_members

- **功能**: 踢人（可能适配多成员端点）。
- **参数**: `group_id: str | int`, `user_id: str | int`, `reject_add_request: bool = False`
- **返回**: `None`
- **示例**：

```python
await api.set_group_kick_members(123456, 987654, reject_add_request=True)
```

### set_group_kick

- **功能**: 踢人。
- **参数**: 同上
- **返回**: `None`
- **示例**：

```python
await api.set_group_kick(123456, 987654)
```

### set_group_ban

:::warning
解除禁言的方式还不明确
:::

- **功能**: 禁言成员。
- **参数**: `group_id`, `user_id`, `duration: int = 1800`
- **返回**: `None`
- **示例**：

```python
await api.set_group_ban(123456, 987654, duration=600)
```

### set_group_whole_ban

- **功能**: 全员禁言开关。
- **参数**: `group_id`, `enable: bool`
- **返回**: `None`
- **示例**：

```python
await api.set_group_whole_ban(123456, True)
```

### set_group_admin

- **功能**: 设为/取消管理员。
- **参数**: `group_id`, `user_id`, `enable: bool`
- **返回**: `None`
- **示例**：

```python
await api.set_group_admin(123456, 987654, enable=True)
```

### set_group_leave

- **功能**: 退群/解散。
- **参数**: `group_id`, `is_dismiss: bool = False`
- **返回**: `None`
- **示例**：

```python
await api.set_group_leave(123456, is_dismiss=False)
```

### set_group_special_title

- **功能**: 设定专属头衔。
- **参数**: `group_id`, `user_id`, `special_title: str = ""`
- **返回**: `None`
- **示例**：

```python
await api.set_group_special_title(123456, 987654, "优秀猫娘")
```

### set_group_add_request

- **功能**: 审核加群请求。
- **参数**: `flag: str`, `approve: bool`, `reason: str | None`
- **返回**: `None`
- **示例**：

```python
await api.set_group_add_request(flag, approve=True)
await api.set_group_add_request(flag, approve=False, reason="抱歉，群满员")
```

### set_group_card

- **功能**: 修改群名片。
- **参数**: `group_id`, `user_id`, `card: str = ""`
- **返回**: `None`
- **示例**：

```python
await api.set_group_card(123456, 987654, "小明")
```

---

## 群消息管理

### set_essence_msg

- **功能**: 设为精华。
- **参数**: `message_id: str | int`
- **返回**: `None`
- **示例**：

```python
await api.set_essence_msg(mid)
```

### delete_essence_msg

- **功能**: 取消精华。
- **参数**: `message_id: str | int`
- **返回**: `None`
- **示例**：

```python
await api.delete_essence_msg(mid)
```

### get_group_essence_msg

- **功能**: 获取群精华列表。
- **参数**: `group_id: str | int`
- **返回**: `list[dict]`
- **示例**：

```python
lst = await api.get_group_essence_msg(123456)
```

---

## 群文件

### post_group_file

- **功能**: 便捷上传群文件（四选一：image/record/video/file）。
- **参数**: `group_id`, `image: str | None`, `record: str | None`, `video: str | None`, `file: str | None`
- **返回**: `str`（message_id）
- **示例**：

```python
await api.post_group_file(123456, image="C:/a.jpg")
```

[参考](../4.%20数据结构介绍/4.%20MessageSegment.md#File（通用文件）)

### move_group_file

- **功能**: 移动群文件到指定文件夹。
- **参数**: `group_id`, `file_id: str`, `current_parent_directory: str`, `target_parent_directory: str`
- **返回**: `None`
- **示例**：

```python
await api.move_group_file(123456, file_id, "[文件夹ID1]", "[文件夹ID2]")
```

### trans_group_file

- **功能**: 转存为永久文件。
- **参数**: `group_id`, `file_id: str`
- **返回**: `None`
- **示例**：
```python
await api.trans_group_file(123456, file_id)
```

### rename_group_file

- **功能**: 重命名群文件。
- **参数**: `group_id`, `file_id: str`, `new_name: str`
- **返回**: `None`
- **示例**：

```python
await api.rename_group_file(123456, file_id, "新名字.zip")
```

### get_file

- **功能**: 取文件元信息。
- **参数**: `file_id: str`, `file: str`
- **返回**: `File`
- **示例**：

```python
meta = await api.get_file(file_id, "a.zip")
```

### upload_group_file

- **功能**: 上传群文件。
- **参数**: `group_id`, `file: str`, `name: str`, `folder`
- **返回**: `str` 或无（以实现为准）
- **示例**：

```python
await api.upload_group_file(123456, "./a.zip", "a.zip", folder="[文件夹ID]")
```

### create_group_file_folder

- **功能**: 新建群文件夹。
- **参数**: `group_id`, `folder_name: str`
- **返回**: `None`
- **示例**：

```python
await api.create_group_file_folder(123456, "资料")
```

### group_file_folder_makedir

:::warning
还没实现
:::

- **功能**: 递归创建文件夹路径。
- **参数**: `group_id`, `path: str`
- **返回**: `str`（文件夹 id）
- **示例**：

```python
folder_id = await api.group_file_folder_makedir(123456, "/资料/图片")
```

### delete_group_file

- **功能**: 删除群文件。
- **参数**: `group_id`, `file_id: str`
- **返回**: `None`
- **示例**：

```python
await api.delete_group_file(123456, file_id)
```

### delete_group_folder

- **功能**: 删除群文件夹。
- **参数**: `group_id`, `folder_id: str`
- **返回**: `None`
- **示例**：

```python
await api.delete_group_folder(123456, "[文件夹ID]")
```

### get_group_root_files

:::warning
数据结构可能发生变化
:::

- **功能**: 列出根目录文件。
- **参数**: `group_id`, `file_count: int = 50`
- **返回**: `dict`
- **示例**：

```python
root = await api.get_group_root_files(123456, 100)
```

### get_group_files_by_folder

:::warning
数据结构可能发生变化
:::

- **功能**: 按文件夹列出文件。
- **参数**: `group_id`, `folder_id: str`, `file_count: int = 50`
- **返回**: `dict`
- **示例**：

```python
files = await api.get_group_files_by_folder(123456, folder_id, 100)
```

### get_group_file_url

- **功能**: 获取群文件直链。
- **参数**: `group_id`, `file_id: str`
- **返回**: `str`
- **示例**：

```python
url = await api.get_group_file_url(123456, file_id)
```

---

## 荣誉与信息

:::warning
数据结构待完善
:::

### get_group_honor_info

- **功能**: 获取群荣誉信息。
- **参数**: `group_id`, `type: Literal["talkative", "performer", "legend", "emotion", "all"]`
- **返回**: `GroupChatActivity`
- **示例**：

```python
honor = await api.get_group_honor_info(123456, "talkative")
```

### get_group_info

- **功能**: 获取群信息。
- **参数**: `group_id`
- **返回**: `GroupInfo`
- **示例**：

```python
info = await api.get_group_info(123456)
```

### get_group_info_ex

- **功能**: 获取扩展群信息。
- **参数**: `group_id`
- **返回**: `dict`
- **示例**：

```python
data = await api.get_group_info_ex(123456)
```

### get_group_member_info

- **功能**: 获取群成员信息。
- **参数**: `group_id`, `user_id`
- **返回**: `GroupMemberInfo`
- **示例**：

```python
member = await api.get_group_member_info(123456, 987654)
```

### get_group_member_list

- **功能**: 获取群成员列表。
- **参数**: `group_id`
- **返回**: `GroupMemberList`
- **示例**：

```python
members = await api.get_group_member_list(123456)
```

### get_group_shut_list

- **功能**: 获取禁言名单。
- **参数**: `group_id`
- **返回**: `GroupMemberList`
- **示例**：

```python
shut = await api.get_group_shut_list(123456)
```

### set_group_remark

- **功能**: 设置群备注。
- **参数**: `group_id`, `remark: str`
- **返回**: `None`
- **示例**：
```python
await api.set_group_remark(123456, "学习群")
```

### set_group_sign

- **功能**: 群签到。
- **参数**: `group_id`
- **返回**: `None`
- **示例**：
```python
await api.set_group_sign(123456)
```

### send_group_sign

- **功能**: 发起群签到。
- **参数**: `group_id`
- **返回**: `None`
- **示例**：
```python
await api.send_group_sign(123456)
```

---

## 管理员功能

### set_group_avatar

- **功能**: 设置群头像（目前仅 URL）。
- **参数**: `group_id`, `file: str`
- **返回**: `None`
- **示例**：

```python
await api.set_group_avatar(123456, "https://img.example.com/a.png")
```

### set_group_name

- **功能**: 设置群名。
- **参数**: `group_id`, `name: str`
- **返回**: `None`
- **示例**：

```python
await api.set_group_name(123456, "编程交流")
```

### _send_group_notice

- **功能**: 发送群公告。
- **参数**: `group_id`, `content: str`, `confirm_required: bool = False`, `image: str | None`, `is_show_edit_card: bool = False`, `pinned: bool = False`
- **返回**: `None`
- **示例**：

```python
await api._send_group_notice(123456, "今晚 8 点开会", pinned=True)
```


